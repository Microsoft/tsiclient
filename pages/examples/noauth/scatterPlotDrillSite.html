
<!DOCTYPE html>
<html>
    <head>
        <title>Scatter Plot</title>

        <!-- boilerplate headers are injected with head.js, grab them from the live example header, or include a link to head.js -->
        <script src="../boilerplate/head.js"></script>
    </head>
    <body style="font-family: 'Segoe UI', sans-serif;">
        <div id="chart1" style="width: 1072px; height: 800px;"></div>
        <div id="temporalToggle" class = "buttonWrapper" style= "margin-top: 50px; display: none;align-items: center; justify-content: center;"><button onclick="toggleTemporal()">Toggle Temporal</button></div>

        <script>
            let temporal = false;
            let toggleTemporal = null;
            window.onload = function() {
                // Show toggle
                document.getElementById("temporalToggle").style.display = "flex";
                // create fake data in the shape our charts expect (connected in series around circle)
                let getData = (scaleFactor = 10, offset = 0) => {
                    let data = [];
                    let from = new Date();
                    let to;

                    for(let i = 0; i < 2; i++){
                        let lines = {};
                        data.push({[`Drill_Site${i}`]: lines});
                        for(let j = 0; j < 2; j++){
                            let values = {};
                            lines[`Drill${j}`] = values;
                            for(let k = 0; k < 8 * Math.PI; k+=.5){
                                    let to = new Date(from.valueOf() + 1000*k);
                                    let y = scaleFactor * Math.sin(k) + offset + (scaleFactor / 5) + Math.random();
                                    let x = scaleFactor * (i === 1 ? .2 : 1) * Math.cos(k) + offset + Math.random();
                                    let temp = Math.random() * scaleFactor;
                                    values[to.toISOString()] = {x, y, temp};
                            }
                        }
                    }
                    return data;
                }

                // render the data in a chart
                let tsiClient = new TsiClient();
                let data = getData();

                let scatterPlot =  new tsiClient.ux.ScatterPlot(document.getElementById('chart1'));

                let renderScatterPlot = () => scatterPlot.render(data, {
                    legend: 'shown', 
                    spAxisLabels: ['X', 'Y'], 
                    noAnimate: false, 
                    isTemporal: temporal, 
                    grid: true, 
                    tooltip: true, 
                    theme: 'light', 
                    spMeasures: ['x', 'y', 'temp'],
                },
                [
                    {connectPoints: true, pointConnectionMeasure: "x"}, 
                    {connectPoints: false}
                ]
                );

                renderScatterPlot();

                toggleTemporal = () => {
                    temporal = !temporal;
                    renderScatterPlot();
                }
            };
            
        </script>
    </body>
</html>